<!doctype html>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>Baseline Canvas2D</title>
<style>
  html,body{margin:0;height:100%;background:#0b0b0f;color:#e8e8ee;font-family:system-ui}
  #btn{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:#000a}
  #btn>button{font-size:18px;padding:12px 18px;border-radius:12px;border:1px solid #333;background:#1b1d29;color:#e8e8ee}
  #log{position:fixed;left:8px;bottom:8px;right:8px;font:12px/1.4 monospace;background:#0006;padding:6px 8px;border-radius:8px;max-height:35vh;overflow:auto}
  canvas{width:100%;height:100%;display:block}
</style>
<canvas id=c></canvas>
<div id=btn><button>タップして開始</button></div>
<pre id=log></pre>
<script>
const log= m=>{logEl.textContent+=m+"\n"}
const c=document.getElementById('c'), logEl=document.getElementById('log'), btn=document.querySelector('#btn>button')
let ctx, t=0, raf
window.addEventListener('error', e=>log('Error:'+ (e.message||e.error)))
window.addEventListener('unhandledrejection', e=>log('Rej:'+ (e.reason&&e.reason.message||e.reason)))
btn.addEventListener('click', ()=>{
  btn.parentElement.remove()
  ctx = c.getContext('2d')
  if(!ctx){ alert('Canvas2Dが使えません'); log('no 2d context'); return }
  resize(); window.addEventListener('resize', resize)
  raf=requestAnimationFrame(loop)
})
function resize(){ c.width=c.clientWidth; c.height=c.clientHeight; }
function loop(){
  t+=0.016
  ctx.clearRect(0,0,c.width,c.height)
  const s=80+60*Math.sin(t*2)
  ctx.fillStyle='#59f'
  ctx.fillRect((c.width-s)/2,(c.height-s)/2,s,s)
  ctx.fillStyle='#fff'
  ctx.fillText('Canvas2D OK', 12, 22)
  raf=requestAnimationFrame(loop)
}
</script>
