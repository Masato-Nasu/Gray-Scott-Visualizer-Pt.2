<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>Reaction–Diffusion (Gray–Scott) — Safe</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Reaction–Diffusion (Gray–Scott) — Safe</h1>
    <div id="status">Initializing…</div>
  </header>

  <main>
    <canvas id="view" width="768" height="512"></canvas>
    <aside>
      <div class="controls">
        <label>解像度
          <select id="res">
            <option value="512x512">512×512</option>
            <option value="768x512" selected>768×512</option>
            <option value="1024x768">1024×768</option>
          </select>
        </label>
        <label>時間倍率
          <input id="speed" type="range" min="0.2" max="4" step="0.1" value="1">
          <span id="speedVal">1.0×</span>
        </label>
        <label>描画スケール
          <input id="scale" type="range" min="1" max="2" step="0.01" value="1">
          <span id="scaleVal">1.00</span>
        </label>
        <div class="row">
          <button id="seed">Seed</button>
          <button id="reset">Reset</button>
          <button id="safe">Safe</button>
          <button id="cpu">CPU</button>
        </div>
        <details>
          <summary>パラメータ</summary>
          <div class="grid2">
            <label>feed F<input id="feed" type="range" min="0.0" max="0.1" step="0.0005" value="0.037"></label>
            <label>kill k<input id="kill" type="range" min="0.0" max="0.1" step="0.0005" value="0.06"></label>
            <label>Du<input id="du" type="range" min="0.0" max="1.0" step="0.001" value="0.16"></label>
            <label>Dv<input id="dv" type="range" min="0.0" max="1.0" step="0.001" value="0.08"></label>
          </div>
        </details>
        <p class="hint">※ うまく動かない場合は「Safe」または「CPU」をお試しください。</p>
      </div>
      <div class="logwrap"><pre id="log"></pre></div>
    </aside>
  </main>

  <footer>
    <small>WebGL2 / CPU フォールバック実装。© 2025</small>
  </footer>

  <script src="rd.js"></script>
</body>
</html>